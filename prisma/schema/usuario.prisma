model Usuario {
  id             String    @id @default(cuid())
  nombre         String?
  correo         String    @unique
  correoVerificado DateTime?
  imagen         String?

  // Relaciones con NextAuth
  cuentas        Cuenta[]
  sesiones       Sesion[]

  // Campos personalizados
  rol            Rol       @default(PACIENTE)
  telefono       String?

  // Timestamps
  creadoEn       DateTime  @default(now()) @map("creado_en")
  actualizadoEn  DateTime  @updatedAt @map("actualizado_en")

  @@map("usuarios")
}

model Cuenta {
  id                String  @id @default(cuid())
  usuarioId         String
  tipo              String
  proveedor         String
  idCuentaProveedor String
  tokenRefresco     String? @db.Text
  tokenAcceso       String? @db.Text
  expiraEn          Int?
  tipoToken         String?
  alcance           String?
  idToken           String? @db.Text
  estadoSesion      String?

  usuario           Usuario @relation(fields: [usuarioId], references: [id], onDelete: Cascade)

  @@unique([proveedor, idCuentaProveedor])
  @@map("cuentas")
}

model Sesion {
  id           String   @id @default(cuid())
  tokenSesion  String   @unique
  usuarioId    String
  expira       DateTime
  usuario      Usuario  @relation(fields: [usuarioId], references: [id], onDelete: Cascade)

  @@map("sesiones")
}

model TokenVerificacion {
  identificador String
  token         String   @unique
  expira        DateTime

  @@unique([identificador, token])
  @@map("tokens_verificacion")
}

enum Rol {
  SUPER_ADMIN
  ADMINISTRADOR
  DOCTOR
  ASISTENTE
  PACIENTE
}